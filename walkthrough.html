<!DOCTYPE html>
<html>
	<head>
		<title>Documentation</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="icon" type="image/png" href="images/favicon.png">

		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="css/screen.css" rel="stylesheet" media="screen">
		<link href="css/style.css" rel="stylesheet" media="screen">

		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://cdn.pubnub.com/pubnub-3.5.1.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/function.js"></script>

	</head>

	<body>
		<nav class="navbar navbar-default" role="navigation">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar">&nbsp;</span>
					<span class="icon-bar">&nbsp;</span>
					<span class="icon-bar">&nbsp;</span>
				</button>
				<a class="navbar-brand" href="index.html">
					<img src="images/logo.png"/> 
				</a>
			</div>

			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="top-link nav navbar-nav navbar-right">
					<li>
						<a href="index.html">Home</a>
					</li>
					<li>
						<a href="document.html">Documentation</a>
					</li>
					<li>
						<a href="walkthrough.html">Walkthrough</a>
					</li>
				</ul>
			</div>
		</nav>

		<!-- CONTENT -->
		<div id="content">
			<div class="content-area" style="padding-top: 0">
				<div class="container">
					<div class="span12">
				        <div class="palette">
					        <h2>Basic Introduction</h2>
					        <h4><b>JavaScript Include</b></h4>
							<pre>&lt;script src="http://cdn.pubnub.com/pubnub-3.5.1.min.js"&gt;&lt;/script&gt;</pre>
						</div>
					</div>
					<br />
					<div class="span6">
						<div class="palette">
						    <h2>Introduciton Details</h2>
						    <p>
						        This is the first step to initialize the Connection Class
						        which will be used in the following steps below.
						    </p><p>
						        The following examples below will show a few more options
						        that will allow you to open TCP sockets and stream
						        only the data that you are interested in.
						        This is called <strong>Stream Multiplexing</strong>
						        which streams multiple feeds over a single TCP Socket.
						    </p><p>
						        You'll want to go much further in depth by reading the
						        <a class=github-link target=readmegit
						           href=https://github.com/pubnub/real-time-stocks/blob/master/README.md>
						        	Real-time Stock PHP and JavaScript README.md
						        </a>
						        documentation on GitHub.
						    </p>
						</div>
					</div>
					<div class="span6">
				        <div class="highlight highlight-html">
				        	<h4><b>PubNub - Class Instance</b></h4>
							<pre><span class="kd">var</span> <span class="nx">pubnub</span>  <span class="o">=</span> <span class="nx">PUBNUB</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">subscribe_key</span> <span class="o">:</span> <span class="s1">'demo'</span><span class="p">,</span>
    <span class="nx">publish_key</span>   <span class="o">:</span> <span class="s1">'demo'</span>
<span class="p">});</span>
							</pre>
						</div>
					</div>
					<div class="span6">
				        <div class="palette">
					        <h4><b>PubNub - Open Multiplexed Stream</b></h4>
							<div class="highlight highlight-html">
								<pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.pubnub.com/pubnub-3.5.1.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// Example JavaScript Multiplexing with Three Symbols</span>
    <span class="nx">pubnub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
        <span class="nx">channel</span> <span class="o">:</span> <span class="p">[</span><span class="s1">'MSFT'</span><span class="p">,</span> <span class="s1">'YHOO'</span><span class="p">,</span> <span class="s1">'ORCL'</span><span class="p">],</span>
        <span class="nx">message</span> <span class="o">:</span> <span class="nx">receiver</span>
    <span class="p">})</span>

    <span class="c1">// Add Three More Symbols (Automatic Multiplexes into the TCP Stream)</span>
    <span class="nx">pubnub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
        <span class="nx">channel</span> <span class="o">:</span> <span class="p">[</span><span class="s1">'AAPL'</span><span class="p">,</span> <span class="s1">'F'</span><span class="p">,</span> <span class="s1">'GOOG'</span><span class="p">],</span>
        <span class="nx">message</span> <span class="o">:</span> <span class="nx">receiver</span>
    <span class="p">})</span>

    <span class="c1">// The Receiver Function</span>
    <span class="kd">function</span> <span class="nx">receiver</span><span class="p">(</span><span class="nx">update</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">update</span><span class="p">)</span> <span class="p">}</span>
<span class="p">})();</span><br /><span class="nt">&lt;/script&gt;</span>
								</pre>
							</div>
						</div>
					</div>
					<div class="span6">
					    <div class="palette">
					    	<h4><b>PubNub - Stop One Stream</b></h4>
							<pre><span class="nx">pubnub</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">({</span> <span class="nx">channel</span> <span class="o">:</span> <span class="nx">'MSFT'</span><span class="p">})</span>
							</pre>
						</div>
					</div>
					<div class="span6">
					    <div class="palette">
					        <h4><b>PubNub - History</b></h4>
					        <p>
					        	This application uses a <code style="width: 150px; height: 30px;">pubnub.history()</code> call for several purposes.
								One is to bootstrap the HTML5 client app.
								Another is to load the history of the chat conversations.
							</p>
							<pre>
pubnub.history({
    limit    : 5,
    channel  : 'MSFT',
    callback : history_receiver
})
								<br />
function history_receiver(messages) {    
    log_messages(messages);
}
							</pre>
						</div>
					</div>
					<br />
					<div class="span6">
					    <div class="palette">
					        <h2>Simple Embedded Chat Application</h2>
							<p>The chat stream is separate from the stock symbol ticker stream.</p>
							<p><a><img style="max-width:100%;" src="images/group-chat.png" /></a></p>
							<p>NOTE: This is a basic chat where you can find the integrated
							   source code currently inside <code style="width: 70px; height: 30px;">app.js</code> JavaScript source file.</p>
							<p>Here is the full source code for the chat example:</p>

							<div class="highlight highlight-html">
								<pre><span class="c">&lt;!-- =========== --&gt;</span>
<span class="c">&lt;!-- PANEL: CHAT --&gt;</span>
<span class="c">&lt;!-- =========== --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row row-margin"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"span9"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span>
               <span class="na">id=</span><span class="s">"chat-input"</span>
               <span class="na">value=</span><span class="s">""</span>
               <span class="na">placeholder=</span><span class="s">"Chat Here"</span>
               <span class="na">class=</span><span class="s">"span9"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"span3"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span>
               <span class="na">id=</span><span class="s">"chat-name"</span>
               <span class="na">value=</span><span class="s">"Todd"</span>
               <span class="na">class=</span><span class="s">"span2"</span><span class="nt">&gt;</span>
        <span class="ni">&amp;nbsp;</span><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"fui-user"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"chat-output"</span> <span class="na">class=</span><span class="s">"span11"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- CHAT OUTPUT HERE --&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
								</pre>
							</div>

					<p>Followed by the JavaScript code which uses the <code style="width: 50px; height: 30px;">id=</code> fields
					   to bind user events and as display output blocks on the screen:</p>

					<div class="highlight highlight-html">
						<pre><span class="nt">&lt;script&gt;</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="c1">// -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-</span>
<span class="c1">// Chat</span>
<span class="c1">// -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-</span>

<span class="kd">var</span> <span class="nx">pubnub</span>  <span class="o">=</span> <span class="nx">PUBNUB</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">subscribe_key</span> <span class="o">:</span> <span class="s1">'demo'</span><span class="p">,</span>
    <span class="nx">publish_key</span>   <span class="o">:</span> <span class="s1">'demo'</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">input</span>   <span class="o">=</span> <span class="nx">pubnub</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">'chat-input'</span><span class="p">)</span>
<span class="p">,</span>   <span class="nx">output</span>  <span class="o">=</span> <span class="nx">pubnub</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">'chat-output'</span><span class="p">)</span>
<span class="p">,</span>   <span class="nx">cname</span>   <span class="o">=</span> <span class="nx">pubnub</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">'chat-name'</span><span class="p">)</span>
<span class="p">,</span>   <span class="nx">channel</span> <span class="o">=</span> <span class="s1">'stock-chat'</span><span class="p">;</span>

<span class="c1">// Send Chat Message</span>
<span class="kd">function</span> <span class="nx">send</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">pubnub</span><span class="p">.</span><span class="nx">publish</span><span class="p">({</span>
        <span class="nx">channel</span> <span class="o">:</span> <span class="nx">channel</span><span class="p">,</span>
        <span class="nx">message</span> <span class="o">:</span> <span class="p">{</span>
            <span class="nx">name</span> <span class="o">:</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">cname</span><span class="p">.</span><span class="nx">value</span><span class="p">),</span>
            <span class="nx">text</span> <span class="o">:</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">),</span>
            <span class="nx">time</span> <span class="o">:</span> <span class="nx">date_out</span><span class="p">()</span>
        <span class="p">},</span>
        <span class="nx">x</span> <span class="o">:</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s1">''</span><span class="p">)</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Append Chat Message</span>
<span class="kd">function</span> <span class="nx">chat</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Default Name</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="s1">'name'</span> <span class="k">in</span> <span class="nx">message</span><span class="p">))</span> <span class="nx">message</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">"Robert"</span><span class="p">;</span>
    <span class="nx">message</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span> <span class="p">);</span>

    <span class="c1">// Clean Precaution</span>
    <span class="nx">message</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>

    <span class="c1">// Ouptut to Screen</span>
    <span class="nx">output</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">pubnub</span><span class="p">.</span><span class="nx">supplant</span><span class="p">(</span>
        <span class="s2">"&lt;strong class=chat-time&gt;{time}&lt;/strong&gt; "</span><span class="o">+</span>
        <span class="s2">"&lt;strong class=chat-name&gt;( {name} )&lt;/strong&gt; | &amp;nbsp;"</span><span class="o">+</span>
        <span class="s2">"{text}&lt;br&gt;"</span><span class="p">,</span> <span class="nx">message</span>
    <span class="p">)</span> <span class="o">+</span> <span class="nx">output</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// On Connect we can Load History</span>
<span class="kd">function</span> <span class="nx">connect</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">pubnub</span><span class="p">.</span><span class="nx">history</span><span class="p">({</span>
        <span class="nx">channel</span>  <span class="o">:</span> <span class="nx">channel</span><span class="p">,</span>
        <span class="nx">limit</span>    <span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="nx">callback</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msgs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">msgs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
                <span class="nx">pubnub</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">chat</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="c1">// Receive Chat Message</span>
<span class="nx">pubnub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
    <span class="nx">channel</span>  <span class="o">:</span> <span class="nx">channel</span><span class="p">,</span>
    <span class="nx">connect</span>  <span class="o">:</span> <span class="nx">connect</span><span class="p">,</span>
    <span class="nx">callback</span> <span class="o">:</span> <span class="nx">chat</span>
<span class="p">});</span>

<span class="nx">pubnub</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="s1">'keyup'</span><span class="p">,</span> <span class="nx">input</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
   <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">charCode</span><span class="p">)</span> <span class="o">===</span> <span class="mi">13</span> <span class="o">&amp;&amp;</span> <span class="nx">send</span><span class="p">();</span>
<span class="p">});</span>

<span class="p">})();</span><br /><span class="nt">&lt;/script&gt;</span>
								</pre>
							</div>
						</div>
					</div>
					<br />
				</div>
			</div>
		</div>
		<!-- /CONTENT -->
	</body>
</html>
